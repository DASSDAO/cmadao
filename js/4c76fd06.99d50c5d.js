(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["4c76fd06"],{"22bd":function(t,a,e){},"2a23":function(t,a,e){},"416d":function(t,a,e){"use strict";var s=e("22bd"),i=e.n(s);i.a},5881:function(t,a,e){"use strict";var s=e("2a23"),i=e.n(s);i.a},"63d0":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"et"},[e("TitleBar",{attrs:{titleTx:"ETH"===t.$route.query.p1?"ETH":"CMAT"}}),e("div",{staticClass:"up-part"},[e("span",{staticClass:"eth-amt"},[t._v(t._s(Number(t.showBalance).toFixed(4)))]),e("span",{staticClass:"eth-bal"},[t._v("=$"+t._s(t.totalUSD))]),e("div",{staticClass:"tr-btn"},["CMAT"===t.$route.query.p1?e("q-btn",{staticClass:"et-btn",attrs:{flat:"",color:"primary",label:t.$t("buy")},nativeOn:{click:function(a){return t.toBuyMcoin(a)}}}):t._e(),"CMAT"===t.$route.query.p1?e("div",{staticClass:"porti-line"}):t._e(),e("q-btn",{staticClass:"et-btn",attrs:{flat:"",color:"primary",label:t.$t("receive")},nativeOn:{click:function(a){return t.toReceiveEth(a)}}}),e("div",{staticClass:"porti-line"}),e("q-btn",{staticClass:"et-btn",attrs:{flat:"",color:"primary",label:t.$t("send")},nativeOn:{click:function(a){return t.toTransferEth(a)}}})],1)]),e("div",{staticClass:"down-part"},[e("span",{staticClass:"transfer-tip"},[t._v(t._s(t.$t("trrecord")))]),e("div",{staticClass:"trans-log"},[e("q-list",{staticStyle:{width:"100%"},attrs:{highlight:"",separator:"","no-border":""}},t._l(t.transactions,function(a){return e("q-item",{key:a.index,staticClass:"tx-item",attrs:{to:{path:"transferdetail",query:{item:a,coin:t.currentCoin}}}},[e("div",{staticClass:"addr-amt"},[e("span",{staticStyle:{"font-family":"PingFangSC-Semibold",color:"#44566B"}},[t._v(t._s(t.setAddress(a.from,a.to)))]),e("span",{style:{color:t.setAmtColor(a.to,a.txreceipt_status)}},[t._v(t._s(t.setAmt(a.to,a.value)))])]),e("span",{staticClass:"time"},[t._v(t._s(t.formatTime(a.timeStamp)))])])}))],1)]),e("custom-input-dialog-vue",{attrs:{dialogData:t.dialogData},on:{pressOK:t.pressOK}})],1)},i=[];s._withStripped=!0;e("96cf");var n,o,r,l,c=e("c973"),u=e.n(c),h=(e("c5f6"),e("6b54"),e("9bfb")),d=e("e7ea"),p=e("a002"),f=e.n(p),g=e("6b45"),m=e("96a1"),b=e("3452"),v={props:["params"],components:{TitleBar:h["a"],CustomInputDialogVue:g["a"]},data:function(){return{title:"ETH",currentCoin:this.$route.query.p1,showBalance:this.$route.query.p2,transactions:[],showBuyDialog:!0,dialogData:{show:!1,msg:this.$t("buy")+"CMAT",from:"ethtrans"},totalUSD:"0.0000"}},created:function(){var t=this;"ETH"===this.$route.query.p1?f.a.getItem("historyTrans").then(function(a){null!==a&&(t.transactions=JSON.parse(a))}):f.a.getItem("historyTransMcoin").then(function(a){null!==a&&(t.transactions=JSON.parse(a))})},methods:{pressOK:function(t){var a=this;this.$q.loading.show({message:this.$t("txsubmiting"),spinnerSize:50}),f.a.getItem("cryptMnemonic").then(function(e){null===e?(a.$q.loading.hide(),toast(a.$t("toastnowallet")),a.$router.push("/walletfirst")):a.unlockWallet(e,t)}).catch(function(t){toast(t)})},unlockWallet:function(t,a){var e=this;try{var s=b.AES.decrypt(t,a.v2),i=s.toString(b.enc.Utf8),n=d["ethers"].Wallet.fromMnemonic(i),o=n.connect(this.global.defaultProvider),r=this.global.m3gameContract.connect(o),l={value:d["ethers"].utils.parseEther(a.v1*this.global.mcoinPrice+"")};r.buyMCoin(a.v1,l).then(function(t){e.$q.loading.hide(),e.showInfoDialog(e.$t("submitted"),t.hash)}).catch(function(t){e.global.reprotError2Bmob(e,"buyMCoin",t),e.$q.loading.hide()})}catch(t){console.log(t),toast(e.$t("passworderror")),this.$q.loading.hide()}},showInfoDialog:function(t,a){var e=this;this.$q.dialog({title:t,message:"",ok:e.$t("viewresults"),cancel:e.$t("close")}).then(function(){Object(m["a"])(e.global.etherscanio+"tx/"+a)}).catch(function(){})},toBuyMcoin:function(){this.dialogData.show=!0},setAmtColor:function(t,a){return"0"===a?"red":t===this.global.wallet.ethAddress?"dodgerblue":"green"},toReceiveEth:function(){this.$router.push({path:"/receipteth",query:{p1:this.$route.query.p1}})},toTransferEth:function(){this.$router.push({path:"/transfereth",query:{p1:this.$route.query.p1}})},formatTime:function(t){return this.convertUTCTimeToLocalTime(new Date(1e3*t))},setAddress:function(t,a){return a===this.global.wallet.ethAddress?t.substring(0,7)+"..."+t.substring(t.length-7,t.length):a.substring(0,7)+"..."+a.substring(a.length-7,a.length)},setAmt:function(t,a){return t===this.global.wallet.ethAddress?"+"+Number(d["ethers"].utils.formatEther(a)).toFixed(4):"-"+Number(d["ethers"].utils.formatEther(a)).toFixed(4)},convertUTCTimeToLocalTime:function(t){function a(t){return t>9?t:"0"+t}var e=new Date(t),s=e.getFullYear(),i=a(e.getMonth()+1),n=a(e.getDate()),o=e.getHours();o=a(o);var r=a(e.getMinutes()),l=s+"-"+i+"-"+n+" "+o+":"+r;return l},getEthTrans:function(){var t=this,a=this.global.etherscanAPIPrefix+".etherscan.io/api?module=account&action=txlist&address="+this.global.wallet.ethAddress+"&startblock=0&endblock=99999999&page=1&offset=100&sort=desc&apikey="+this.global.etherscanAPIKey;this.$axios.get(a).then(function(a){t.transactions=a.data.result}).catch(function(t){console.log(t)}).then(function(){})},getMcoinTrans:function(){var t=this,a=this.global.etherscanAPIPrefix+".etherscan.io/api?module=account&action=tokentx&contractaddress="+this.global.m3gameAddress+"&address="+this.global.wallet.ethAddress+"&page=1&offset=100&sort=desc&apikey="+this.global.etherscanAPIKey;this.$axios.get(a).then(function(a){t.transactions=a.data.result}).catch(function(t){}).then(function(){})},setETHTask:function(){var t=this,a=this;n=setInterval(function(){var e=t.global.etherscanAPIPrefix+".etherscan.io/api?module=account&action=balance&address="+t.global.wallet.ethAddress+"&tag=latest&apikey="+t.global.etherscanAPIKey;t.$axios.get(e).then(function(t){a.global.wallet.lastEthbalance="0"===t.data.result?"0.0000":d["ethers"].utils.formatEther(t.data.result),a.showBalance=a.global.wallet.lastEthbalance}).catch(function(t){}).then(function(){})},this.global.taskInterval),r=setInterval(function(){a.getEthTrans()},this.global.taskInterval)},setMcoinTask:function(){var t=this;o=setInterval(function(){var a=function(){var a=u()(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.global.m3gameContract.balanceOf(t.global.wallet.ethAddress);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a,this)}));return function(){return a.apply(this,arguments)}}();a().then(function(a){t.showBalance=t.global.wallet.lastMcoinBalance="0"===a?"0.0000":d["ethers"].utils.formatEther(a)})},this.global.taskInterval),l=setInterval(function(){t.getMcoinTrans()},this.global.taskInterval)}},mounted:function(){"ETH"===this.$route.query.p1?(this.getEthTrans(),this.setETHTask(),this.totalUSD=Number(this.global.wallet.lastEthbalance*this.global.ethPrice).toFixed(4)):(this.getMcoinTrans(),this.setMcoinTask(),this.totalUSD=Number(this.global.mcoinPrice*this.global.ethPrice*this.global.wallet.lastMcoinBalance).toFixed(4))},beforeDestroy:function(){clearInterval(l),clearInterval(n),clearInterval(o),clearInterval(r),"ETH"===this.currentCoin?f.a.setItem("historyTrans",JSON.stringify(this.transactions)):f.a.setItem("historyTransMcoin",JSON.stringify(this.transactions))}},w=v,y=(e("416d"),e("2877")),$=Object(y["a"])(w,s,i,!1,null,null,null);$.options.__file="EthTransfer.vue";a["default"]=$.exports},"6b45":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-dialog",{on:{cancel:t.onCancel,show:t.onShow,hide:t.onHide},scopedSlots:t._u([{key:"buttons",fn:function(a){return e("div",{staticClass:"dialog-btn"},[e("q-btn",{attrs:{flat:"",label:t.$t("cancel")},on:{click:a.cancel}}),e("q-btn",{staticStyle:{"margin-top":"0px"},attrs:{flat:"",label:t.$t("ok")},on:{click:t.onOk}})],1)}}]),model:{value:t.dialogData.show,callback:function(a){t.$set(t.dialogData,"show",a)},expression:"dialogData.show"}},[e("span",{staticStyle:{color:"black"},attrs:{slot:"message"},slot:"message"},[t._v(t._s(t.dialogData.msg))]),e("div",{attrs:{slot:"body"},slot:"body"},[e("q-input",{attrs:{type:"number",placeholder:"ethtrans"===t.dialogData.from?t.$t("inputbyamt"):"investDetail"===t.dialogData.from?t.$t("fillsellamt"):t.$t("drawamt")},model:{value:t.input1,callback:function(a){t.input1=a},expression:"input1"}}),e("q-input",{directives:[{name:"show",rawName:"v-show",value:t.cpuRepayShow,expression:"cpuRepayShow"}],attrs:{type:"number",placeholder:t.$t("repayamt")},model:{value:t.repayAmt,callback:function(a){t.repayAmt=a},expression:"repayAmt"}}),"ethtrans"===t.dialogData.from?e("span",{staticStyle:{"font-size":"10px"}},[t._v(t._s(t.$t("cutprice"))+":"+t._s(t.global.mcoinPrice)+","+t._s(t.$t("payethnum",{num:t.input1*t.global.mcoinPrice})))]):t._e(),e("q-input",{attrs:{placeholder:t.$t("enterpswd")},model:{value:t.input2,callback:function(a){t.input2=a},expression:"input2"}})],1)])},i=[];s._withStripped=!0;e("96cf");var n=e("c973"),o=e.n(n),r={props:["dialogData"],data:function(){return{input1:"investDetail"===this.dialogData.from?this.dialogData.canDrawAmt:"",input2:"",repayAmt:""}},computed:{cpuRepayShow:function(){return this.input1>this.dialogData.leftCanDraw3&&this.dialogData.w>=4},repayAmtTip:function(){return this.dialogData.amt}},methods:{onOk:function(){var t=this;if(""!==this.input1&&null!==this.input1)if(""!==this.input2)if(this.input2.length<6)toast(this.$t("pwsdless6"));else if("investDetail"===this.dialogData.from&&this.input1>this.dialogData.canDrawAmt)toast(this.$t("drawexceed"));else if(this.cpuRepayShow&&this.repayAmt<this.dialogData.amt)toast(this.$t("repayinsuffit")+this.dialogData.amt);else if("referAwards"===this.dialogData.from&&this.input1>this.dialogData.referAwards)toast(this.$t("drawexceed"));else if("referAwards"===this.dialogData.from&&this.input1>this.dialogData.totalInvest)toast(this.$t("drawexdtalivst"));else{if(("investDetail"===this.dialogData.from||"referAwards"===this.dialogData.from)&&.01*this.input1/this.global.mcoinPrice>this.global.wallet.lastMcoinBalance)return this.$q.dialog({title:"",message:this.$t("cmatinsuft"),ok:this.$t("ok")}).then(function(){_this.$router.push({path:"/ethtransfer",query:{p1:"CMAT",p2:t.global.wallet.lastMcoinBalance}})}),void(this.dialogData.show=!1);this.$emit("pressOK",{v1:this.input1,v2:this.input2,v3:this.repayAmt}),this.dialogData.show=!1}else toast(this.$t("pswdnull"));else toast(this.$t("numnull"))},onCancel:function(){},onShow:function(){},onHide:function(){},choose:function(){var t=o()(regeneratorRuntime.mark(function t(a,e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(a,e){return t.apply(this,arguments)}}()}},l=r,c=(e("5881"),e("2877")),u=Object(c["a"])(l,s,i,!1,null,"064c8a42",null);u.options.__file="CustomInputDialog.vue";a["a"]=u.exports},"9bfb":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"title-bar"},[e("q-icon",{staticClass:"title-back-icon",attrs:{name:"navigate_before"},nativeOn:{click:function(a){return t.goBack(a)}}}),e("div",{staticClass:"title-tx"},[t._v(t._s(t.titleTx))])],1)},i=[];s._withStripped=!0;var n={props:["titleTx"],methods:{goBack:function(){this.$router.go(-1)}}},o=n,r=(e("a675"),e("2877")),l=Object(r["a"])(o,s,i,!1,null,null,null);l.options.__file="TitleBar.vue";a["a"]=l.exports},a675:function(t,a,e){"use strict";var s=e("ca51"),i=e.n(s);i.a},ca51:function(t,a,e){}}]);